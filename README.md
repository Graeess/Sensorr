Техническая документация по проекту "Sensor"
1. Введение
Проект "Sensor" — это веб-приложение, предназначенное для регистрации и хранения данных о сенсорах и измерениях. Приложение использует архитектуру RESTful и реализует аутентификацию пользователей с помощью JWT.

2. Стек технологий
Java 17: Основной язык программирования.
Spring Boot: Основной фреймворк для создания веб-приложений.
Spring Security: Для управления аутентификацией и авторизацией.
JPA/Hibernate: Для работы с базой данных.
MySQL: В качестве СУБД (может быть изменено на любую другую).
JSON Web Tokens (JWT): Для аутентификации пользователей.
Lombok: Для упрощения кода (автоматическое создание геттеров и сеттеров).
3. Основные компоненты
3.1. Сущности
User: Представляет пользователей системы с полями:

id: Уникальный идентификатор.
username: Имя пользователя.
password: Хранит зашифрованный пароль.
Measurement: Представляет данные о измерениях с полями:

id: Уникальный идентификатор.
value: Значение измерения.
raining: Флаг, указывающий, идет ли дождь.
sensor: Объект сенсора, к которому относится измерение.
3.2. DTO (Data Transfer Objects)
AuthRequest: Используется для передачи данных аутентификации (имя пользователя и пароль).
MeasurementDTO: Используется для передачи данных о новом измерении.
3.3. Контроллеры
AuthController:

POST /register: Регистрация нового пользователя.
POST /login: Аутентификация пользователя и получение JWT.
MeasurementController:

POST /measurements/add: Добавление нового измерения.
GET /measurements: Получение всех измерений.
GET /measurements/rainyDaysCount: Получение количества дождливых дней.
SensorController:

POST /sensors/registration: Регистрация нового сенсора.
3.4. Сервисы
UserService: Обрабатывает логику, связанную с пользователями, включая регистрацию и загрузку пользователей по имени.
MeasurementService: Обрабатывает логику, связанную с измерениями, включая добавление и получение измерений.
SensorService: Обрабатывает логику, связанную с сенсорами, включая регистрацию новых сенсоров.
3.5. Безопасность
Используется JWT для аутентификации пользователей. Токены генерируются при успешной аутентификации и передаются клиенту.
Запросы к защищённым эндпоинтам требуют наличия валидного токена в заголовке Authorization.
4. Логика работы
4.1. Регистрация пользователя
Клиент отправляет POST-запрос на /register с данными о пользователе.
Контроллер вызывает метод в сервисе для регистрации пользователя.
Пароль пользователя шифруется с помощью BCrypt перед сохранением.
4.2. Аутентификация
Клиент отправляет POST-запрос на /login с именем пользователя и паролем.
Контроллер пытается аутентифицировать пользователя с помощью AuthenticationManager.
При успешной аутентификации генерируется JWT, который возвращается клиенту.
4.3. Работа с измерениями
Клиент отправляет POST-запрос на /measurements/add с данными измерения.

Контроллер принимает данные, вызывает метод сервиса для добавления измерения.

Измерение сохраняется в базе данных.

Для получения всех измерений клиент отправляет GET-запрос на /measurements, а для получения количества дождливых дней — на /measurements/rainyDaysCount.

5. Запуск приложения
Убедитесь, что у вас установлен Java 17 и Maven.
Склонируйте репозиторий проекта.
Настройте параметры подключения к базе данных в application.properties.
Запустите приложение с помощью команды:
bash
Копировать код
mvn spring-boot:run
6. Заключение
Проект "Sensor" представляет собой мощное приложение для работы с данными сенсоров, обеспечивая безопасность и удобство использования. Возможности для расширения и улучшения включают добавление более сложной логики обработки данных, интеграцию с другими системами и оптимизацию производительности.


